<body>
  {{!-- Login Form --}}
<div class="login">
    <div class="container pt-5">
      <div class="row justify-content-center">
          <div class="card p-3 p-md-4">
            <h1>Login to your account!</h1>
            <form id="loginViaEmail">
              <div class="form-group">
                <label>Email</label>
                <input type="email" required id="email" name="emailId" class="form-control" placeholder="Enter email">
              </div>{{!-- group --}}
              <div class="form-group">
                <label>Password</label>
                <input type="password" minlength="6" required id="password" name="password" class="form-control"
                  placeholder="Enter password">
              </div>{{!-- group --}}
              <button type="submit" id="Login" class="btn btn-blue-o w-100 mt-3">Login</button>
            </form>
          </div>{{!-- card --}}
      </div>{{!-- row --}}
    </div>{{!-- conatainer --}}
  </div>{{!-- top --}}
{{!-- Script --}}
<script>
    $(document).ready(function () {
      $('#loginViaPhone').hide();
      $('.btn-otp').click(function () {
        $('#loginViaPhone').show();
        $('#loginViaEmail').hide();
      });
      $('.btn-login').click(function () {
        $('#loginViaPhone').hide();
        $('#loginViaEmail').show();
      });

      $('#loginViaEmail').on('submit', function (e) {
        e.preventDefault();

        var data = {
          email: $('#email').val(),
          password: $('#password').val(),
        };
        if (data.email != '' && data.password != '') {
          swal({
            icon: "info",
            text: 'Logging you in!',
            button: false,
            timer: 5000
          })
          $.ajax({
            url: '/open/login',
            type: 'POST',
            data: {
              email: data.email,
              password: data.password,
            },
            dataType: 'json',
            success: function (msg) {
              if (msg.role == 'ADMIN') {
                window.location = `/admin/myAccount`
              } else {
                window.location = `/user/myAccount`
              }
            },
            error: function (jqXHR, textStatus) {
              var responseText = jQuery.parseJSON(jqXHR.responseText);
              swal({
                icon: "error",
                title: "Oops..",
                text: responseText['message'],
                button: false
              })
            }
          });
        } else {
          swal({
            icon: "error",
            title: "Oops..",
            text: "please provide credentials",
            button: false,
            timer: 2000
          })
        }
      });
    });
</script>
</body>